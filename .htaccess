RewriteEngine On

# Ensure FollowSymLinks is enabled (often required for ModRewrite)
Options +FollowSymLinks

# 1. Force remove .html extension (Redirect)
# If someone visits /page.html, redirect them to /page
# Exclude the request if it's already an internal rewrite
RewriteCond %{THE_REQUEST} \s/+(.+?)\.html[\s?] [NC]
RewriteRule ^ /%1 [R=301,L,NE]

# 2. Internally serve .html files (Rewrite)
# If someone visits /page, serve /page.html without showing .html in URL
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L,QSA]
